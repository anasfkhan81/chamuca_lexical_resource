<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ChamuÃ§a SPARQL Explorer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@triply/yasgui@3.0.16/build/yasgui.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@triply/yasgui@3.0.16/build/yasgui.min.js"></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: sans-serif;
      }
      #toolbar {
        padding: 1rem;
        background: #f8f8f8;
        border-bottom: 1px solid #ddd;
      }
      #toolbar button {
        margin-right: 1rem;
        padding: 0.5rem 1rem;
        background: #007acc;
        border: none;
        color: white;
        border-radius: 4px;
        cursor: pointer;
      }
      #toolbar button:hover {
        background: #005fa3;
      }
      #yasgui {
        height: calc(100vh - 60px);
      }

      /* ðŸŽ¨ Make endpoint selector khaki */
      .yasgui .endpointInputWrapper {
        background-color: khaki !important;
        padding: 0.2rem;
        border-radius: 4px;
      }

      .yasgui .endpointInputWrapper input {
        background-color: khaki !important;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div id="toolbar">
      <button onclick="applyPresetQuery('lexical')">Lexical Entries</button>
      <button onclick="applyPresetQuery('hindi')">Hindi Entries</button>
      <button onclick="applyPresetQuery('etymons')">Portuguese Etymons</button>
      <!-- Add more buttons here -->
    </div>

    <div id="yasgui"></div>

    <script src="queries.js"></script>
    <script>
      const endpointURL = `https://lari-datasets.ilc.cnr.it/chamuca/query`

      const yasgui = new Yasgui(document.getElementById("yasgui"), {
        persistenceId: null,
        requestConfig: {
          endpoint: endpointURL,
        },
      })

      applyPresetQuery("lexical")

      function applyPresetQuery(type) {
        try {
          if (!presetQueries) {
            console.error("Preset queries not loaded or invalid")
            return
          }

          if (!type || typeof type !== "string") {
            console.error("Invalid query preset:", type)
            return
          }

          // Load preset query data.
          const presetType = type.trim().toLowerCase()
          const presetData = presetQueries?.[presetType]

          if (!presetData) {
            console.error("Unknown query preset:", presetType)
            return
          }

          // Update current tab with query data.
          yasgui.getTab().setName(presetData.label || type.trim())
          yasgui.getTab().setQuery(presetData.query || "")
          yasgui.getTab().setEndpoint(endpointURL)
        } catch (e) {
          console.error("Error loading preset query:", e)
        }
      }
    </script>
  </body>
</html>
